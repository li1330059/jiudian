(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0163":function(e,o,n){},"23c6":function(e,o,n){"use strict";n.r(o);var t=n("2b5e"),a=n("9e19");for(var s in a)["default"].indexOf(s)<0&&function(e){n.d(o,e,(function(){return a[e]}))}(s);n("4751");var i=n("f0c5"),c=Object(i["a"])(a["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],void 0);o["default"]=c.exports},"2b5e":function(e,o,n){"use strict";n.d(o,"b",(function(){return t})),n.d(o,"c",(function(){return a})),n.d(o,"a",(function(){}));var t=function(){var e=this.$createElement;this._self._c},a=[]},4751:function(e,o,n){"use strict";var t=n("0163"),a=n.n(t);a.a},"9e19":function(e,o,n){"use strict";n.r(o);var t=n("d833"),a=n.n(t);for(var s in t)["default"].indexOf(s)<0&&function(e){n.d(o,e,(function(){return t[e]}))}(s);o["default"]=a.a},d833:function(e,o,n){"use strict";(function(e){var t=n("4ea4");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=t(n("6797")),s={data:function(){return{avatarUrl:"/static/img/ddl.jpg",ni:"",yqm:"",code:"",pc:"",session_key:"",avatar:"https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0"}},onLoad:function(o){e.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),console.log("e"),console.log(o),this.yqm=decodeURIComponent(o.scene),console.log("yqqm"),console.log(this.yqm)},onShow:function(){},methods:{scan:function(){e.scanCode({success:function(o){decodeURIComponent(o.path);e.navigateTo({url:"/"+decodeURIComponent(o.path)})},fail:function(o){e.showToast({title:"扫码失败",icon:"error",duration:1e3})}})},onChooseAvatar:function(e){console.log(e),this.avatarUrl=e.detail.avatarUrl},login:function(){e.switchTab({url:"/pages/index/index"})},chang:function(e){this.ni=e.detail.value},loginn:function(){console.log("登录");var o=this;e.login({provider:"univerify",success:function(n){console.log("code"),console.log(n.code),o.code=n.code,e.request({url:o.apiUrl+"index.php/index/RequestHttp",method:"GET",data:{code:o.code},success:function(e){console.log("cts"),console.log(e),o.openId=e.data.openid,o.unionid=e.data.unionid,o.session_key=e.data.session_key,console.log("session_key"),console.log(o.session_key)}})}})},getphonenum:function(o){var n=this;console.log("ee"),console.log(o),console.log("session_key"),console.log(this.session_key);var t=this,s=e.getAccountInfoSync();console.log("accountInfo"),console.log(s);var i=s.miniProgram.appId;t.pc=new a.default(i,t.session_key),console.log("pc"),console.log(t.pc);var c=t.pc.decryptData(o.detail.encryptedData,o.detail.iv);console.log(c),console.log(c.phoneNumber),this.phoneNumber=c.phoneNumber,"undefined"==t.yqm?(console.log("unn"),e.request({method:"POST",url:t.apiUrl+"index.php/index/regist",data:JSON.stringify({user_name:this.openId,phone:this.phoneNumber}),header:{"Content-Type":"application/json; charset=utf-8"},success:function(o){console.log("ssave"),console.log(o,1111),e.setStorageSync("token",o.data.token),e.setStorageSync("code",o.data.code),e.setStorageSync("openid",o.data.user_name),e.request({method:"POST",url:n.apiUrl+"index.php/index/find_user_user_name",data:JSON.stringify({user_name:e.getStorageSync("openid")}),success:function(o){console.log("tou"),console.log(o),n.userInfo=o.data,console.log("微信头像"),""!=n.userInfo.avatar||void 0!=n.userInfo.avatar?(n.avatar=n.userInfo.avatar,e.setStorageSync("avatar",n.avatar)):e.setStorageSync("avatar",n.avatar)}}),e.showToast({title:"登录成功",duration:2e3}),e.switchTab({url:"/pages/index/index"})}})):e.request({method:"POST",url:t.apiUrl+"index.php/index/regist",data:JSON.stringify({user_name:this.phoneNumber}),header:{"Content-Type":"application/json; charset=utf-8"},success:function(o){console.log("ssave"),console.log(o,1111),e.setStorageSync("token",o.data.token),e.setStorageSync("openid",n.phoneNumber),e.setStorageSync("phone",n.phoneNumber),e.showToast({title:"登录成功",duration:2e3}),e.switchTab({url:"/pages/index/index"})}}),e.getUserInfo({provider:"weixin",success:function(e){t.userInfo=e.userInfo,console.log("uuf"),console.log(t.userInfo)},fail:function(o){e.showToast({title:"登录授权失败",icon:"none"})}}),console.log(o)}}};o.default=s}).call(this,n("543d")["default"])},f117:function(e,o,n){"use strict";(function(e,o){var t=n("4ea4");n("cdf0");t(n("66fd"));var a=t(n("23c6"));e.__webpack_require_UNI_MP_PLUGIN__=n,o(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["f117","common/runtime","common/vendor"]]]);