(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pwqrorder/pwqrorder"],{"0264":function(t,e,n){},"07f4":function(t,e,n){"use strict";n.r(e);var i=n("ff78"),o=n.n(i);for(var c in i)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(c);e["default"]=o.a},"3ac3":function(t,e,n){"use strict";n.r(e);var i=n("6eb3"),o=n("07f4");for(var c in o)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(c);n("a1ef");var a=n("f0c5"),s=Object(a["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=s.exports},"4bc0":function(t,e,n){"use strict";(function(t,e){var i=n("4ea4");n("cdf0");i(n("66fd"));var o=i(n("3ac3"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"6eb3":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return i}));var i={wTimePicker:function(){return n.e("components/w-time-picker/w-time-picker").then(n.bind(null,"10ca"))}},o=function(){var t=this.$createElement;this._self._c},c=[]},a1ef:function(t,e,n){"use strict";var i=n("0264"),o=n.n(i);o.a},ff78:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={components:{wTimePicker:function(){n.e("components/w-time-picker/w-time-picker").then(function(){return resolve(n("10ca"))}.bind(null,n)).catch(n.oe)}},data:function(){return{screenHeight:0,tcid:0,tclxid:0,liverName:"",IdCard:"",phone:"",lxrName:"",lxrPhone:"",idd:"",beforeDate:"",afterDate:"",tclxs:[],num:1,allPrice:"",syrq:"",tcName:"",ddhao:"",iddd:""}},onLoad:function(e){console.log("optn"),console.log(e),this.tcid=e.tcid,this.tclxid=e.tclxid,this.tcName=e.title,this.screenHeight=t.getSystemInfoSync().windowHeight},onShow:function(){var e=this;t.request({method:"POST",url:this.apiUrl+"index.php/index/pwtcxq",data:JSON.stringify({id:this.tclxid}),success:function(t){console.log("套餐类型"),console.log(t),e.tclxs=t.data,e.getAllPrice()}})},methods:{bback:function(){t.navigateBack(-1)},onConfirm:function(t){console.log("选择时间"),console.log(t)},onCancel:function(){},rq:function(t){this.syrq=t,console.log("日期"),console.log(t)},aad:function(){this.num++,this.getAllPrice()},reduce:function(){this.num>1&&this.num--,this.getAllPrice()},getAllPrice:function(){this.allPrice=this.tclxs.dj*this.num},yud:function(){var e=this,n=/^1[3456789]\d{9}/;""!=this.liverName?n.test(this.lxrPhone)?""!=this.liverName&&n.test(this.lxrPhone)&&t.request({method:"POST",url:this.apiUrl+"index.php/index/tcdd",data:JSON.stringify({user_name:t.getStorageSync("openid"),syrq:this.syrq,num:this.num,tclxname:this.tclxs.title,cxr:this.liverName,tcName:this.tcName,lxrName:this.lxrName,lxrPhone:this.lxrPhone,yhqId:0,tcId:this.tcid,tclxid:this.tclxid,dd:1}),success:function(n){console.log("提交票务订单"),console.log(n.data),e.ddhao=n.data.ddhao,1==n.data.status&&(t.showToast({title:n.data.data}),t.request({method:"POST",url:e.apiUrl+"index.php/index/ddxqddh2",data:JSON.stringify({ddhao:e.ddhao}),success:function(n){console.log(n),e.iddd=n.data.id,t.request({method:"POST",url:e.apiUrl+"index.php/Wx/config",data:JSON.stringify({id:e.iddd,openid:t.getStorageSync("openid"),dd:1}),success:function(e){console.log("支"),console.log(e),t.requestPayment({provider:"wxpay",timeStamp:e.data.timeStamp.toString(),nonceStr:e.data.nonce,package:e.data.package,signType:e.data.signType,paySign:e.data.sign,success:function(e){console.log("res"),console.log(e),t.showToast({icon:"success",title:"支付成功"}),console.log("支付成功",e)},fail:function(e){console.log("err"),console.log(e),this.err=e,t.showToast({icon:"error",title:"失败"}),this.err=!0}})}})}}))}}):t.showToast({icon:"none",title:"手机号码有误"}):t.showToast({icon:"none",title:"请填写出行人姓名"})}}};e.default=i}).call(this,n("543d")["default"])}},[["4bc0","common/runtime","common/vendor"]]]);